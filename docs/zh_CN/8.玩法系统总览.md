 # Ludork：2D RPG 工具包 - 帮助手册
 ## 玩法系统总览

 本章从高层角度介绍 Ludork 在编辑器与运行时暴露的核心玩法系统，重点在于系统之间如何协作，而非底层实现细节。

 主要系统包括：
 - 游戏地图与导航。
 - 角色与交互。
 - 粒子与视觉特效。
 - 光照与环境效果。

 ### 游戏地图与导航

 游戏地图定义了玩法发生的空间：
 - 使用图块集和多图层构建，详见“图块集与地图编辑”章节。
 - 包含通行性信息，用于决定角色可以移动到哪里。
 - 可以包含区域（Region）、标记或其他元数据，用于遇敌、特殊规则等。

 寻路与导航基于：
 - 地图的瓦片网格以及通行性设置。
 - 用于加速碰撞与移动检查的缓存数据。

 作为创作者，你主要通过以下方式与该系统交互：
 - 设计地图布局。
 - 在图块集中配置哪些图块可通行、哪些会阻挡。
 - 在地图上放置用于事件或逻辑的区域与标记。

 ### 角色与交互

 角色系统负责管理出现在地图上的实体，例如：
 - 玩家角色与队伍成员。
 - 敌人与 NPC。
 - 宝箱、开关、门等交互对象。

 角色通常具有以下特征：
 - 在地图上的位置。
 - 对应的立绘或动画资源。
 - 一系列基础参数（生命值、属性或其他与玩法相关的数值，视项目而定）。

 角色与世界之间的交互通常由以下因素驱动：
 - 事件逻辑与公共函数。
 - 与图块或其他角色的碰撞。
 - 进入特定区域、按键操作或满足特定条件等触发器。

 编辑器会提供相应工具在地图上放置角色并配置其行为，具体表现会根据项目的实际设置略有差异。

 ### 粒子与视觉特效

 粒子系统用于表现各种动态视觉效果，例如：
 - 魔法、攻击和命中特效。
 - 火花、落雪、雨点等环境效果。
 - UI 与反馈效果，如击中特效、闪光等。

 粒子系统负责：
 - 管理大量小型精灵的生成、生命周期与运动。
 - 在每一帧更新粒子的位置与状态。
 - 根据图层与混合模式将其绘制到场景之上。

 你通常通过以下方式配置粒子：
 - 在数据文件中选择或定义粒子预设。
 - 通过可视化脚本或配置，将粒子效果与事件、技能或地图触发器关联起来。

 ### 光照与环境效果

 光照与环境效果帮助塑造场景的氛围。光照系统一般支持：
 - 多个光源，每个光源具有位置、颜色和强度等属性。
 - 影响整张地图的环境光/全局光设置。
 - 通过光照与着色器的组合，营造夜晚、洞穴或高对比度场景等效果。

 在编辑器中，通过专门的光照配置面板，你可以：
 - 添加、删除和调整光源。
 - 将光照设置与地图或配置数据一起保存。

 环境效果也可以通过着色器、粒子系统或公共函数进行驱动，从而在视觉与玩法逻辑之间实现紧密联动。

 ### 可视化脚本与玩法逻辑

 上述系统通过可视化脚本彼此连接：
 - 公共函数可以读取和修改地图、角色、粒子或 UI 的状态。
 - 节点图可以表达条件逻辑，例如进入某个区域时触发战斗，或攻击命中时触发粒子效果。

 实际上，你可以：
 - 将地图、角色、粒子与光照视作数据与系统层。
 - 使用公共函数来决定在什么条件下、如何使用这些系统响应玩家输入与游戏事件。

 这种在数据、系统与可视化逻辑之间的分层设计，让项目在扩展与维护时更加灵活。

